<div [ngStyle]="{background: 'url(../../assets/images/horbg.png)'}" class="page-title"><h1>PUBSCREEN</h1></div>


<div class="guideline" id="guideline">
    <br />
    <mat-tab-group (selectedTabChange) ="resetFormVals()">
        <mat-tab label="Adding Touchscreen Publications">
            <br />
            <div class="content">
                PubScreen is an interactive database enabling users to deposit key features from papers that use touchscreen technology and also to search/find the publication(s)
                that match the search criteria.
            </div>
            <div class="account-card-container2">
                <mat-card>
                    <mat-toolbar color="primary">Adding Publication</mat-toolbar>

                    <mat-card-content>

                        <div>
                            <br />
                            <label>Please fill the following form to add a new touchscreen-based publication:</label>
                            <hr /><br />


                            <!--Adding Paper information ********************************************-->
                            <label style="color:#566573">Paper Information:</label><br /><br />

                            <!--Adding Paper option-->
                            <mat-radio-group [formControl]="addingOption" [(ngModel)]="addingOptionModel" required>
                                <span>Please indicate which of the following options you want to use for adding the paper:</span>
                                <mat-radio-button value="1">DOI</mat-radio-button>
                                <mat-radio-button value="2">PubMedID</mat-radio-button>
                                <mat-radio-button value="3">None</mat-radio-button>
                                <mat-error style="font-size:small" *ngIf="addingOption.invalid">{{getErrorMessagePaperOption()}}</mat-error>
                            </mat-radio-group>
                            <br /><br />

                            <!--Submitting Paper DOI to get Author List, Title, Abstract, Year, Keywords -->

                            <!--Paper DOI if DOI is available-->
                            <mat-form-field *ngIf="addingOptionModel=='1'">

                                <input matInput placeholder="Paper's DOI" [(ngModel)]="doiKeyModel" [formControl]="doiKey" required>
                                <mat-error *ngIf="doiKey.invalid">{{getErrorMessageDOIKey()}}</mat-error>

                            </mat-form-field>&nbsp;
                            <button mat-raised-button *ngIf="addingOptionModel=='1'" matTooltip="Add DOI to get some information of paper" (click)="addDOI(doiKeyModel)" [disabled]="setDisabledAddDOI()">Add DOI</button>
                            <br/>

                            <!--Paper's PubMedID if PubmedID is available-->
                            <mat-form-field *ngIf="addingOptionModel=='2'">

                                <input matInput placeholder="Paper's PubMedID" [(ngModel)]="PubMedKeyModel" [formControl]="pubMedKey" required>
                                <mat-error *ngIf="pubMedKey.invalid">{{getErrorMessagePubMedKey()}}</mat-error>

                            </mat-form-field>&nbsp;
                            <button mat-raised-button *ngIf="addingOptionModel=='2'" matTooltip="Add PubMedID to get some information of paper" (click)="addPubMedID(PubMedKeyModel)" [disabled]="setDisabledAddPubMedID()">Add PubMedID</button>
                            <br />

                            <!--Paper Author-->
                            <mat-form-field>
                                <mat-select [formControl]="author" placeholder="Select Author" [(ngModel)]="authorModel" required multiple>

                                    <ngx-mat-select-search placeholderLabel="Search based on last name" noEntriesFoundLabel="Result not found!" [(ngModel)]="authorMultiSelect" [formControl]="authorMultiFilterCtrl"></ngx-mat-select-search>

                                    <mat-option *ngFor="let author of filteredAutorList | async" [value]="author.id">
                                        {{author.firstName}}-{{author.lastName}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="author.invalid">{{getErrorMessageAuthor()}}</mat-error>
                            </mat-form-field>&nbsp;

                            <button mat-icon-button matTooltip="Add new author" (click)="openDialogAuthor()"><mat-icon>add</mat-icon></button>
                            <br /><br />

                            <!--Paper Title-->
                            <mat-form-field style="width:30%">

                                <textarea matInput placeholder="Paper's Title" [formControl]="title" [(ngModel)]="titleModel" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="4" required>
    
                                        </textarea>
                                <mat-error *ngIf="title.invalid">{{getErrorMessageTitle()}}</mat-error>

                            </mat-form-field>

                            <!--Paper Abstract-->
                            <mat-form-field style="width:30%; padding-left:35px">

                                <textarea matInput placeholder="Paper's Abstract" [(ngModel)]="abstractModel" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="5">
    
                                        </textarea>
                            </mat-form-field>

                            <!--Paper year-->
                            <mat-form-field style="width:19%; padding-left:30px">

                                <input matInput placeholder="Paper's Year" [formControl]="year" [(ngModel)]="yearModel" required>
                                <mat-error *ngIf="year.invalid">{{getErrorMessageYear()}}</mat-error>
                                <mat-error *ngIf="year.invalid">{{getErrorMessageYearVal()}}</mat-error>

                            </mat-form-field><br />

                            <!--Paper Keywords-->
                            <mat-form-field style="width:30%;">

                                <input matInput placeholder="Paper's Keywords" [(ngModel)]="keywordsModel">

                            </mat-form-field>

                            <!--Paper DOI-->
                            <mat-form-field style="width:30%; padding-left:35px">

                                <input matInput placeholder="Paper's DOI" [(ngModel)]="doiModel" [formControl]="doi" required>
                                <mat-error *ngIf="doi.invalid">{{getErrorMessageDOI()}}</mat-error>

                            </mat-form-field>

                            <!--Paper Type-->
                            <mat-form-field style="width:19%; padding-left:30px">
                                <mat-select placeholder="Select Type of Paper" [formControl]="paperType" [(ngModel)]="paperTypeModel" required>
                                    <mat-option *ngFor="let type of paperTypeList" [value]="type.id">
                                        {{type.paperType}}
                                    </mat-option>
                                </mat-select>

                                <mat-error *ngIf="paperType.invalid">{{getErrorMessagePaperType()}}</mat-error>
                            </mat-form-field><br /><br />

                            <!--Adding Key Features ********************************************-->
                            <label style="color:#566573">Key Features:</label><br />

                            <!--Cognitive Task-->
                            <mat-form-field style="width:15%; ">
                                <mat-select placeholder="Select Cognitive Task(s)" [formControl]="cognitiveTask" [(ngModel)]="cognitiveTaskModel" required multiple>
                                    <mat-option *ngFor="let task of taskList" [value]="task.id">
                                        {{task.task}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="cognitiveTask.invalid">{{getErrorMessageTask()}}</mat-error>
                            </mat-form-field>

                            <!--Species-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Specie(s)" [formControl]="specie" [(ngModel)]="specieModel" required multiple>
                                    <mat-option *ngFor="let specie of specieList" [value]="specie.id">
                                        {{specie.species}}
                                    </mat-option>
                                </mat-select>

                                <mat-error *ngIf="specie.invalid">{{getErrorMessageSpecie()}}</mat-error>
                            </mat-form-field>

                            <!--Sex-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Sex" [formControl]="sex" [(ngModel)]="sexModel" required multiple>
                                    <mat-option *ngFor="let sex of sexList" [value]="sex.id">
                                        {{sex.sex}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="sex.invalid">{{getErrorMessageSex()}}</mat-error>
                            </mat-form-field>

                            <!--Strain-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Strain(s)" [(ngModel)]="strainModel" multiple>
                                    <mat-option *ngFor="let strain of strainList" [value]="strain.id">
                                        {{strain.strain}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

                            <!--DiseaseModel-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Disease Model(s)" [(ngModel)]="diseaseModel" multiple>
                                    <mat-option *ngFor="let disease of diseaseList" [value]="disease.id">
                                        {{disease.diseaseModel}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field> <br />

                            <!--BrainRegion-->
                            <mat-form-field style="width:15%;">
                                <mat-select placeholder="Select Brain Region(s)" [(ngModel)]="regionModel" (selectionChange)="selectedRegionChange(regionModel)" multiple>
                                    <mat-option *ngFor="let region of regionList" [value]="region.id">
                                        {{region.brainRegion}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

                            <!--SubRegion-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Sub-brain Region(s)" [(ngModel)]="subRegionModel" multiple>
                                    <mat-option *ngFor="let subregion of subRegionList" [value]="subregion.id">
                                        {{subregion.subRegion}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

                            <!--CellType-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Cell Type(s)" [(ngModel)]="cellTypeModel" multiple>
                                    <mat-option *ngFor="let cell of cellTypeList" [value]="cell.id">
                                        {{cell.cellType}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

                            <!--Method-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Method" [(ngModel)]="methodModel" multiple>
                                    <mat-option *ngFor="let method of methodList" [value]="method.id">
                                        {{method.method}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>


                            <!--NeuroTransmitter Systems-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Neurotransmitter System" [(ngModel)]="neurotransmitterModel" multiple>
                                    <mat-option *ngFor="let neuro of neurotransmitterList" [value]="neuro.id">
                                        {{neuro.neuroTransmitter}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

                        </div>
                        <br />
                        <div>
                            <button mat-raised-button color="accent" class="full-width" [disabled]="setDisabledVal()" (click)="AddPublication()">Submit</button>
                        </div>

                    </mat-card-content>

                </mat-card>
            </div>
        </mat-tab>

        <!--***********************************************************************************************************
        ***************************************************************************************************************-->

        <mat-tab label="Extracting Touchscreen Publications">
            <div style="padding-top:30px">
                <table class="docs-markdown-table">
                    <thead>
                        <tr>
                            <th class="docs-markdown-th" style="color:white; background-color:#795D9C; font-size:large;">Searching Publications</th>

                        </tr>
                    </thead>
                    <tbody class="docs-markdown-tbody">
                        <tr>
                            <td style="padding: 13px 16px;">

                                <div>
                                    <br />
                                    <label>You can search and extract publications based on the following search criteria:</label>
                                    <hr /><br />

                                    <!--Searching Author information ********************************************-->
                                    <label style="color:#566573">Authour Information:</label><br />

                                    <mat-form-field>
                                        <mat-select placeholder="Select Author" [(ngModel)]="authorModel" multiple>

                                            <ngx-mat-select-search placeholderLabel="Search based on last name" noEntriesFoundLabel="Result not found!" [(ngModel)]="authorMultiSelect" [formControl]="authorMultiFilterCtrl"></ngx-mat-select-search>

                                            <mat-option *ngFor="let author of filteredAutorList | async" [value]="author.id">
                                                {{author.firstName}}-{{author.lastName}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>&nbsp;

                                    <br /><br />

                                    <!--Searching Paper information ********************************************-->
                                    <label style="color:#566573">Paper Information:</label><br />

                                    <!--Paper Title-->
                                    <mat-form-field style="width:30%">

                                        <textarea matInput placeholder="Paper's Title" [formControl]="title" [(ngModel)]="titleModel" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="4">
    
                                        </textarea>

                                    </mat-form-field>

                                    <!--Paper Abstract-->
                                    <!--<mat-form-field style="width:30%; padding-left:35px">

                                        <textarea matInput placeholder="Paper's Abstract" [(ngModel)]="abstractModel" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="5">

                                        </textarea>
                                    </mat-form-field>-->
                                    <!--Paper year-->
                                    <mat-form-field style="width:14%; padding-left:30px">

                                        <mat-select placeholder="Select Years(s)" [(ngModel)]="yearSearchModel" multiple>
                                            <mat-option *ngFor="let val of yearList" [value]="val.year">
                                                {{val.year}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>

                                    <!--Paper Type-->
                                    <mat-form-field style="width:14%; padding-left:30px">
                                        <mat-select placeholder="Select Type of Paper" [(ngModel)]="paperTypeModel">
                                            <mat-option *ngFor="let type of paperTypeList" [value]="type.id">
                                                {{type.paperType}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field><br />

                                    <!--Paper Keywords-->
                                    <mat-form-field style="width:30%;">

                                        <input matInput placeholder="Paper's Keywords" [(ngModel)]="keywordsModel">

                                    </mat-form-field>

                                    <!--Paper DOI-->
                                    <mat-form-field style="width:30%; padding-left:35px">

                                        <input matInput placeholder="Paper's DOI" [(ngModel)]="doiModel" [formControl]="doi">


                                    </mat-form-field><br /><br />


                                    <!--Adding Key Features ********************************************-->
                                    <label style="color:#566573">Key Features:</label><br />

                                    <!--Cognitive Task-->
                                    <mat-form-field style="width:15%; ">
                                        <mat-select placeholder="Select Cognitive Task(s)" [formControl]="cognitiveTask" [(ngModel)]="cognitiveTaskModel" required multiple>
                                            <mat-option *ngFor="let task of taskList" [value]="task.id">
                                                {{task.task}}
                                            </mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="cognitiveTask.invalid">{{getErrorMessageTask()}}</mat-error>
                                    </mat-form-field>

                                    <!--Species-->
                                    <mat-form-field style="width:15%; padding-left:30px">
                                        <mat-select placeholder="Select Specie(s)" [(ngModel)]="specieModel" multiple>
                                            <mat-option *ngFor="let specie of specieList" [value]="specie.id">
                                                {{specie.species}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>

                                    <!--Sex-->
                                    <mat-form-field style="width:15%; padding-left:30px">
                                        <mat-select placeholder="Select Sex" [(ngModel)]="sexModel" multiple>
                                            <mat-option *ngFor="let sex of sexList" [value]="sex.id">
                                                {{sex.sex}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>

                                    <!--Strain-->
                                    <mat-form-field style="width:15%; padding-left:30px">
                                        <mat-select placeholder="Select Strain(s)" [(ngModel)]="strainModel" multiple>
                                            <mat-option *ngFor="let strain of strainList" [value]="strain.id">
                                                {{strain.strain}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>

                                    <!--DiseaseModel-->
                                    <mat-form-field style="width:15%; padding-left:30px">
                                        <mat-select placeholder="Select Disease Model(s)" [(ngModel)]="diseaseModel" multiple>
                                            <mat-option *ngFor="let disease of diseaseList" [value]="disease.id">
                                                {{disease.diseaseModel}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field> <br />

                                    <!--BrainRegion-->
                                    <mat-form-field style="width:15%;">
                                        <mat-select placeholder="Select Brain Region(s)" [(ngModel)]="regionModel" (selectionChange)="selectedRegionChange(regionModel)" multiple>
                                            <mat-option *ngFor="let region of regionList" [value]="region.id">
                                                {{region.brainRegion}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>

                                    <!--SubRegion-->
                                    <mat-form-field style="width:15%; padding-left:30px">
                                        <mat-select placeholder="Select Sub-brain Region(s)" [(ngModel)]="subRegionModel" multiple>
                                            <mat-option *ngFor="let subregion of subRegionList" [value]="subregion.id">
                                                {{subregion.subRegion}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>

                                    <!--CellType-->
                                    <mat-form-field style="width:15%; padding-left:30px">
                                        <mat-select placeholder="Select Cell Type(s)" [(ngModel)]="cellTypeModel" multiple>
                                            <mat-option *ngFor="let cell of cellTypeList" [value]="cell.id">
                                                {{cell.cellType}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>

                                    <!--Method-->
                                    <mat-form-field style="width:15%; padding-left:30px">
                                        <mat-select placeholder="Select Method" [(ngModel)]="methodModel" multiple>
                                            <mat-option *ngFor="let method of methodList" [value]="method.id">
                                                {{method.method}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>


                                    <!--NeuroTransmitter Systems-->
                                    <mat-form-field style="width:15%; padding-left:30px">
                                        <mat-select placeholder="Select Neurotransmitter System" [(ngModel)]="neurotransmitterModel" multiple>
                                            <mat-option *ngFor="let neuro of neurotransmitterList" [value]="neuro.id">
                                                {{neuro.neuroTransmitter}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>

                                </div>
                                <br />
                                <div>
                                    <button mat-raised-button color="accent" class="full-width" [disabled]="setDisabledValSearch()" (click)="search()">Search</button>
                                </div>

                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!--Adding table to show result of search-->
            <br /><br />
            <div *ngIf="searchResultList?.length > 0">
                <table class="docs-markdown-table">
                    <thead>
                        <tr>
                            <th class="docs-markdown-th" style="background-color:#bab9b6">List of Publications</th>

                        </tr>
                    </thead>
                    <tbody class="docs-markdown-tbody">
                        <tr style="border-bottom:1pt solid #8D8E90;" *ngFor="let row of searchResultList">
                            <td>
                                <label style="color:#8D8E90"><b>Paper Information:</b></label> <br /><br />

                                <label>Title:</label> &nbsp; <span style="color:#909497;">{{( row.title ==="") ?  "N/A" : row.title}}</span><br /><br />
                                <label>Authors:</label> &nbsp; <span style="color:#909497;">{{( row.author =="") ?  "N/A" : row.author}}</span><br /><br />
                                <label>Keywords:</label>&nbsp; <span style="color:#909497;">{{( row.keywords =="") ?  "N/A" : row.keywords}}</span> &nbsp; &nbsp; &nbsp;
                                <label>DOI:</label>&nbsp; <span style="color:#909497;">{{( row.doi =="") ?  "N/A" : row.doi}}</span>&nbsp; &nbsp; &nbsp;
                                <label>Year:</label> &nbsp; <span style="color:#909497;">{{( row.year =="") ?  "N/A" : row.year}}</span> &nbsp; &nbsp; &nbsp;
                                <label>Paper Type:</label> &nbsp; <span style="color:#909497;">{{( row.paperType =="") ?  "N/A" : row.paperType}}</span><br /><br />

                                <label style="color:#8D8E90"><b>Key Features:</b></label> <br /><br />
                                 
                                <label>Task(s):</label>&nbsp; <span style="color:#909497;">{{( row.task =="") ?  "N/A" : row.task}}</span> &nbsp; &nbsp; &nbsp;
                                <label>Specie(s):</label>&nbsp; <span style="color:#909497;">{{( row.species =="") ?  "N/A" : row.species}}</span> &nbsp; &nbsp; &nbsp;
                                <label>Sex:</label>&nbsp; <span style="color:#909497;">{{( row.sex =="") ?  "N/A" : row.sex}}</span> <br /><br />

                                <label>Strain(s):</label>&nbsp; <span style="color:#909497;">{{( row.strain =="") ?  "N/A" : row.strain}}</span> &nbsp; &nbsp; &nbsp;
                                <label>Disease Model(S):</label>&nbsp; <span style="color:#909497;">{{( row.diseaseModel =="") ?  "N/A" : row.diseaseModel}}</span> <br /><br />

                                <label>Brain Region(s):</label>&nbsp; <span style="color:#909497;">{{( row.brainRegion =="") ?  "N/A" : row.brainRegion}}</span> &nbsp; &nbsp; &nbsp;
                                <label>Sub-brain Region(S):</label>&nbsp; <span style="color:#909497;">{{( row.subRegion =="") ?  "N/A" : row.subRegion}}</span> <br /><br />

                                <label>Cell Type(s):</label>&nbsp; <span style="color:#909497;">{{( row.cellType =="") ?  "N/A" : row.cellType}}</span> &nbsp; &nbsp; &nbsp;
                                <label>Method(s):</label>&nbsp; <span style="color:#909497;">{{( row.method =="") ?  "N/A" : row.method}}</span> &nbsp; &nbsp; &nbsp;
                                <label>Neuro Transmitter:</label>&nbsp; <span style="color:#909497;">{{( row.neuroTransmitter =="") ?  "N/A" : row.neuroTransmitter}}</span> <br />



                            </td>                         
                        </tr> 
                    </tbody>
                </table>
            </div>

        </mat-tab>

    </mat-tab-group>
    <br />
    <br />
    <br />

</div>
