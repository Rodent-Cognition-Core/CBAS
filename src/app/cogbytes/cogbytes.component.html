<div [ngStyle]="{background: 'url(../../assets/images/horbg.png)'}" class="page-title"><h1>COGBYTES</h1></div>

<div>

    <div>

        <div class="content">
            <p style="padding-left:50px">
                Cogbytes ... [<i>insert text here</i>]
            </p>

        </div>


        <!--<app-shared-pubscreen></app-shared-pubscreen>-->
        <!--***********************************************************************************************************
    ***************************************************************************************************************-->
        <div style="padding-top:30px">
            <table class="docs-markdown-table">
                <thead>
                    <tr>
                        <th class="docs-markdown-th" style="color:white; background-color:#795D9C; font-size:large;">YOUR REPOSITORIES</th>

                    </tr>
                </thead>
                <tbody class="docs-markdown-tbody">
                    <tr>
                        <td style="padding: 13px 16px;">

                            <div>
                                <div style="padding-bottom:10px" *ngIf="(isAdmin || isUser); else other_content">
                                    <label>Add new repository: </label>
                                    <button mat-icon-button matTooltip="Add new repository" (click)="openDialogAddPublication()"><mat-icon>add</mat-icon></button>
                                    <br />
                                    <mat-form-field style="width:25%; padding-left:0px">

                                        <mat-select placeholder="Your repositories" [(ngModel)]="yearFromSearchModel">
                                            <mat-option *ngFor="let val of yearList" [value]="val">
                                                {{val}}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>
                                </div>

                                <ng-template #other_content><span style="color:red">You must log in to create a repository!</span> <hr /></ng-template>

                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div style="padding-top:30px">
            <table class="docs-markdown-table">
                <thead>
                    <tr>
                        <th class="docs-markdown-th" style="color:white; background-color:#795D9C; font-size:large;">SEARCH REPOSITORIES</th>

                    </tr>
                </thead>
                <tbody class="docs-markdown-tbody">
                    <tr>
                        <td style="padding: 13px 16px;">
                            <label>You can search and download public repositories based on the following search criteria:</label><br /><br />
                            <hr /><br />

                            <!--Searching Author information ********************************************-->
                            <label style="color:#566573">Author Information:</label><br />

                            <mat-form-field>
                                <mat-select placeholder="Select Author" [(ngModel)]="authorModel" multiple>

                                    <ngx-mat-select-search placeholderLabel="Search based on last name" noEntriesFoundLabel="Result not found!" [(ngModel)]="authorMultiSelect" [formControl]="authorMultiFilterCtrl"></ngx-mat-select-search>

                                    <mat-option *ngFor="let author of filteredAutorList | async" [value]="author.id">
                                        {{author.firstName}}-{{author.lastName}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>&nbsp;

                            <br /><br />

                            <!--Searching Repository information ********************************************-->
                            <label style="color:#566573">Repository Information:</label><br />

                            <!--Paper Title-->
                            <mat-form-field style="width:30%">

                                <textarea matInput placeholder="Name" [(ngModel)]="titleModel" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="4">
    
                                        </textarea>

                            </mat-form-field>

                            <!--Paper Keywords-->
                            <mat-form-field style="width:30%; padding-left:35px">

                                <input matInput placeholder="Keywords" [(ngModel)]="keywordsModel">

                            </mat-form-field>

                            <!--Paper DOI-->
                            <mat-form-field style="width:30%; padding-left:35px">

                                <input matInput placeholder="DOI" [(ngModel)]="doiModel">

                            </mat-form-field><br /><br />

                            <!--Adding Key Features ********************************************-->
                            <label style="color:#566573">Key Features:</label><br />

                            <!--Cognitive Task-->
                            <mat-form-field style="width:15%; ">
                                <mat-select placeholder="Select Cognitive Task(s)" [(ngModel)]="cognitiveTaskModel" required multiple>
                                    <mat-option *ngFor="let task of taskList" [value]="task.id">
                                        <span matTooltip="{{task.task}}">{{task.task}}</span>
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

                            <!--Species-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Specie(s)" [(ngModel)]="specieModel" multiple>
                                    <mat-option *ngFor="let specie of specieList" [value]="specie.id">
                                        {{specie.species}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

                            <!--Sex-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Sex" [(ngModel)]="sexModel" multiple>
                                    <mat-option *ngFor="let sex of sexList" [value]="sex.id">
                                        {{sex.sex}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

                            <!--Strain-->
                            <mat-form-field style="width:15%; padding-left:30px">
                                <mat-select placeholder="Select Strain(s)" [(ngModel)]="strainModel" multiple>
                                    <mat-option *ngFor="let strain of strainList" [value]="strain.id">
                                        {{strain.strain}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>

        <br />
        <div>
            <button mat-raised-button color="accent" class="full-width" [disabled]="setDisabledValSearch()" (click)="search()">Search</button>
        </div>

        </td>
        </tr>
        </tbody>
        </table>
    </div>

        <!--<div>{{isAdmin}}</div>-->
        <!--Adding table to show result of search-->
        <br /><br />
        <div *ngIf="searchResultList?.length > 0">
            <!--<app-shared-experiment></app-shared-experiment>-->
            <table class="docs-markdown-table">
                <thead>
                    <tr>
                        <th class="docs-markdown-th" style="background-color:#bab9b6">List of Publications</th>

                    </tr>
                </thead>
                <tbody class="docs-markdown-tbody">
                    <tr style="border-bottom:1pt solid #8D8E90;" *ngFor="let row of searchResultList">
                        <td>
                            <label style="color:#8D8E90"><b>Paper Information:</b></label>
                            <span *ngIf="isAdmin" style="float:right;"><button mat-icon-button matTooltip="Edit Publication" (click)="openDialogEditPublication(row)"><mat-icon>edit</mat-icon></button></span>&nbsp;
                            <span *ngIf="isAdmin" style="float:right;"><button mat-icon-button matTooltip="Delete Publication" (click)="delPub(row)" color="warn"><mat-icon>delete</mat-icon></button></span>&nbsp;
                            <div style="clear:both"></div>
                            <br /><br />

                            <label>Title:</label> &nbsp; <span style="color:#909497;">{{( row.title ==="") ?  "N/A" : row.title}}</span><br /><br />
                            <label>Authors:</label> &nbsp; <span style="color:#909497;">{{( row.author =="") ?  "N/A" : row.author}}</span><br /><br />
                            <label>Keywords:</label>&nbsp; <span style="color:#909497;">{{( row.keywords =="") ?  "N/A" : row.keywords}}</span> &nbsp; &nbsp; &nbsp;
                            <!--<label>DOI:</label>&nbsp; <span style="color:#909497;">{{( row.doi =="") ?  "N/A" : row.doi}}</span>&nbsp; &nbsp; &nbsp;-->
                            <label>DOI:</label>&nbsp; <span style="color:#909497;" [innerHTML]='( row.doi =="") ?  "N/A" : "<a href=http://www.doi.org/" + row.doi + " target=_blank>" + row.doi + "</a>"'></span>&nbsp; &nbsp; &nbsp;
                            <label>Year:</label> &nbsp; <span style="color:#909497;">{{( row.year =="") ?  "N/A" : row.year}}</span> &nbsp; &nbsp; &nbsp;
                            <label>Paper Type:</label> &nbsp; <span style="color:#909497;">{{( row.paperType =="") ?  "N/A" : row.paperType}}</span><br /><br />

                            <label style="color:#8D8E90"><b>Key Features:</b></label> <br /><br />

                            <label>Task(s):</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.task =="") ?  "N/A" : (_pubSCreenSearch.taskID==Null || _pubSCreenSearch.taskID.lenght == 0 || _pubSCreenSearch.taskID == "") ? row.task  : "<b>" + row.task + "</b>"'></span> &nbsp; &nbsp; &nbsp;
                            <label>Specie(s):</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.species =="") ?  "N/A" : (_pubSCreenSearch.specieID==Null || _pubSCreenSearch.specieID.lenght == 0 || _pubSCreenSearch.specieID == "") ? row.species  : "<b>" + row.species + "</b>"'></span> &nbsp; &nbsp; &nbsp;
                            <label>Sex:</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.sex =="") ?  "N/A" : (_pubSCreenSearch.sexID==Null || _pubSCreenSearch.sexID.lenght == 0 || _pubSCreenSearch.sexID == "") ? row.sex  : "<b>" + row.sex + "</b>"'></span> &nbsp; &nbsp; &nbsp;

                            <label>Strain(s):</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.strain =="") ?  "N/A" : (_pubSCreenSearch.strainID==Null || _pubSCreenSearch.strainID.lenght == 0 || _pubSCreenSearch.strainID == "") ? row.strain  : "<b>" + row.strain + "</b>"'></span> &nbsp; &nbsp; &nbsp;
                            <label>Disease Model(S):</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.diseaseModel =="") ?  "N/A" : (_pubSCreenSearch.diseaseID==Null || _pubSCreenSearch.diseaseID.lenght == 0 || _pubSCreenSearch.diseaseID == "") ? row.diseaseModel  : "<b>" + row.diseaseModel + "</b>"'></span> <br /><br />

                            <label>Brain Region(s):</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.brainRegion =="") ?  "N/A" : (_pubSCreenSearch.regionID==Null || _pubSCreenSearch.regionID.lenght == 0 || _pubSCreenSearch.regionID == "") ? row.brainRegion  : "<b>" + row.brainRegion + "</b>"'></span> &nbsp; &nbsp; &nbsp;
                            <label>Sub-brain Region(S):</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.subRegion =="") ?  "N/A" : (_pubSCreenSearch.subRegionID==Null || _pubSCreenSearch.subRegionID.lenght == 0 || _pubSCreenSearch.subRegionID == "") ? row.subRegion  : "<b>" + row.subRegion + "</b>"'></span> &nbsp; &nbsp; &nbsp;

                            <label>Cell Type(s):</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.cellType =="") ?  "N/A" : (_pubSCreenSearch.cellTypeID==Null || _pubSCreenSearch.cellTypeID.lenght == 0 || _pubSCreenSearch.cellTypeID == "") ? row.cellType  : "<b>" + row.cellType + "</b>"'></span> &nbsp; &nbsp; &nbsp;
                            <label>Method(s):</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.method =="") ?  "N/A" : (_pubSCreenSearch.methodID==Null || _pubSCreenSearch.methodID.lenght == 0 || _pubSCreenSearch.methodID == "") ? row.method  : "<b>" + row.method + "</b>"'></span> &nbsp; &nbsp; &nbsp;
                            <label>Neuro Transmitter:</label>&nbsp; <span style="color:#909497;" [innerHTML]='(row.neuroTransmitter =="") ?  "N/A" : (_pubSCreenSearch.transmitterID==Null || _pubSCreenSearch.transmitterID.lenght == 0 || _pubSCreenSearch.transmitterID == "") ? row.neuroTransmitter  : "<b>" + row.neuroTransmitter + "</b>"'></span> <br /><br />

                            <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" *ngIf="row.experiment.length>0">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        <span style="color: #A569BD;">MouseBytes datasets associate to this publicaton:</span>
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <p><span>You can search and extract the data using the following link and information:</span>&nbsp;<a href="https://mousebytes.ca/data-extraction" target="_blank">Extracting Data</a></p>
                                <table>
                                    <tr *ngFor="let exp of row.experiment">
                                        <td>Experiment Name:&nbsp; <span style="color:#909497;">{{exp.expName}}</span></td>
                                        <td>Taske Name: &nbsp; <span style="color:#909497;">{{exp.taskName}}</span></td>
                                        <td>Status:&nbsp; <span style="color:#909497;">{{exp.status ? "Public" : "Private"}}</span></td>
                                    </tr>
                                </table>

                            </mat-expansion-panel>
                            <br />


                        </td>
                    </tr>
                </tbody>
            </table>
        </div>


        <br />
        <br />
        <br />

    </div>


</div>
